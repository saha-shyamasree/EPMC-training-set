Method	O
for	O
Reading	O
Sensors	O
and	O
Controlling	O
Actuators	O
Using	O
Audio	O
Interfaces	O
of	O
Mobile	O
Devices	O

This	O
article	O
presents	O
a	O
novel	O
closed	O
loop	O
control	O
architecture	O
based	O
on	O
audio	O
channels	O
of	O
several	O
types	O
of	O
computing	O
devices	O
,	O
such	O
as	O
mobile	O
phones	O
and	O
tablet	O
computers	O
,	O
but	O
not	O
restricted	O
to	O
them	O
.	O

The	O
communication	O
is	O
based	O
on	O
an	O
audio	O
interface	O
that	O
relies	O
on	O
the	O
exchange	O
of	O
audio	O
tones	O
,	O
allowing	O
sensors	O
to	O
be	O
read	O
and	O
actuators	O
to	O
be	O
controlled	O
.	O

As	O
an	O
application	O
example	O
,	O
the	O
presented	O
technique	O
is	O
used	O
to	O
build	O
a	O
low	O
cost	O
mobile	O
robot	O
,	O
but	O
the	O
system	O
can	O
also	O
be	O
used	O
in	O
a	O
variety	O
of	O
mechatronics	O
applications	O
and	O
sensor	O
networks	O
,	O
where	O
smartphones	O
are	O
the	O
basic	O
building	O
blocks	O
.	O

Introduction	O
and	O
Motivation	O

Most	O
robots	O
and	O
automation	O
systems	O
rely	O
on	O
processing	O
units	O
to	O
control	O
their	O
behavior	O
.	O

Such	O
processing	O
units	O
can	O
be	O
embedded	O
processors	O
(	O
such	O
as	O
microcontrollers	O
)	O
or	O
general	O
purpose	O
computers	O
(	O
such	O
as	O
PCs	O
)	O
with	O
specialized	O
Input	O
/	O
Output	O
(	O
I	O
/	O
O	O
)	O
accessories	O
.	O

One	O
common	O
practice	O
is	O
the	O
use	O
of	O
USB	O
devices	O
with	O
several	O
I	O
/	O
O	O
options	O
connected	O
to	O
a	O
PC	O
.	O

Another	O
approach	O
consists	O
of	O
using	O
a	O
microcontroller	O
unit	O
that	O
runs	O
a	O
software	O
algorithm	O
to	O
control	O
the	O
system	O
.	O

Frequently	O
this	O
microcontroller	O
is	O
connected	O
to	O
a	O
computer	O
to	O
monitor	O
and	O
set	O
parameters	O
of	O
the	O
running	O
system	O
.	O

Although	O
consolidated	O
,	O
these	O
approaches	O
require	O
specific	O
device	O
drivers	O
on	O
the	O
host	O
computer	O
and	O
special	O
configurations	O
.	O

Moreover	O
,	O
if	O
the	O
control	O
algorithm	O
has	O
to	O
be	O
changed	O
,	O
the	O
user	O
must	O
reprogram	O
the	O
microcontroller	O
,	O
which	O
in	O
some	O
cases	O
requires	O
special	O
hardware	O
tools	O
such	O
as	O
in	O
-	O
circuit	O
programmers	O
and	O
debuggers	O
.	O

Mobile	O
devices	O
such	O
as	O
cell	O
phones	O
,	O
tablets	O
and	O
netbooks	O
are	O
widespread	O
and	O
getting	O
cheaper	O
due	O
to	O
their	O
large	O
production	O
,	O
making	O
them	O
an	O
interesting	O
option	O
to	O
control	O
mechatronics	O
systems	O
.	O

These	O
devices	O
also	O
include	O
several	O
sensors	O
that	O
can	O
be	O
used	O
in	O
a	O
mechatronic	O
system	O
.	O

Examples	O
of	O
sensors	O
available	O
in	O
modern	O
cell	O
phones	O
are	O
the	O
global	O
positioning	O
system	O
receiver	O
(	O
GPS	O
),	O
3	O
-	O
axis	O
accelerometer	O
,	O
compass	O
,	O
liquid	O
crystal	O
display	O
(	O
LCD	O
)	O
with	O
touchscreen	O
,	O
Internet	O
access	O
via	O
WiFi	O
or	O
GPRS	O
/	O
3G	O
services	O
,	O
camera	O
,	O
speakers	O
,	O
microphone	O
,	O
bluetooth	O
module	O
,	O
light	O
sensor	O
and	O
battery	O
(	O
some	O
have	O
even	O
gyroscope	O
,	O
barometer	O
and	O
stereo	O
camera	O
).	O

If	O
all	O
those	O
accessories	O
would	O
be	O
bought	O
separately	O
and	O
installed	O
in	O
a	O
device	O
,	O
the	O
costs	O
would	O
be	O
more	O
expensive	O
than	O
a	O
device	O
with	O
all	O
these	O
features	O
already	O
included	O
.	O

To	O
use	O
a	O
mobile	O
device	O
as	O
a	O
mechatronics	O
system	O
main	O
processing	O
unit	O
,	O
a	O
communication	O
link	O
must	O
established	O
between	O
the	O
control	O
unit	O
and	O
the	O
system	O
under	O
control	O
.	O

Some	O
works	O
[	O
1	O
–	O
3	O
]	O
use	O
the	O
mobile	O
’	O
s	O
device	O
RS	O
-	O
232	O
serial	O
port	O
signals	O
while	O
others	O
use	O
bluetooth	O
[	O
1	O
,	O
4	O
].	O

In	O
all	O
these	O
works	O
,	O
a	O
microcontroller	O
still	O
needs	O
to	O
be	O
used	O
to	O
communicate	O
with	O
the	O
mobile	O
device	O
,	O
to	O
read	O
sensors	O
and	O
to	O
control	O
actuators	O
.	O

The	O
problem	O
is	O
that	O
not	O
all	O
mobile	O
devices	O
have	O
a	O
serial	O
port	O
,	O
or	O
bluetooth	O
communication	O
interface	O
.	O

Analyzing	O
modern	O
mobile	O
devices	O
it	O
is	O
possible	O
to	O
note	O
that	O
most	O
of	O
them	O
have	O
an	O
universal	O
communication	O
interface	O
:	O
audio	O
channels	O
,	O
that	O
usually	O
can	O
be	O
accessed	O
through	O
standard	O
3	O
.	O
5	O
mm	O
P2	O
connectors	O
.	O

If	O
there	O
are	O
no	O
connectors	O
for	O
external	O
audio	O
,	O
this	O
article	O
also	O
offers	O
a	O
solution	O
using	O
suction	O
cups	O
to	O
use	O
the	O
proposed	O
system	O
in	O
mobile	O
devices	O
where	O
the	O
speakers	O
or	O
microphones	O
are	O
built	O
-	O
in	O
.	O

Details	O
of	O
such	O
solution	O
are	O
discussed	O
in	O
Section	O
5	O
.	O
1	O
.	O

In	O
this	O
article	O
,	O
a	O
system	O
that	O
allows	O
closed	O
loop	O
control	O
using	O
any	O
mobile	O
device	O
that	O
can	O
produce	O
and	O
receive	O
sounds	O
was	O
designed	O
and	O
built	O
.	O

In	O
such	O
system	O
,	O
audio	O
tones	O
are	O
used	O
to	O
encode	O
actuators	O
control	O
commands	O
and	O
sensors	O
states	O
.	O

The	O
system	O
cost	O
is	O
low	O
because	O
only	O
a	O
few	O
parts	O
are	O
needed	O
(	O
these	O
parts	O
are	O
widely	O
used	O
in	O
the	O
telephony	O
industry	O
,	O
making	O
them	O
also	O
easy	O
to	O
find	O
on	O
the	O
market	O
).	O

Moreover	O
the	O
system	O
does	O
not	O
need	O
any	O
intermediate	O
processing	O
unit	O
,	O
making	O
it	O
flexible	O
to	O
easily	O
update	O
the	O
running	O
algorithm	O
,	O
avoiding	O
the	O
need	O
of	O
reprogramming	O
microcontrollers	O
.	O

Robots	O
and	O
Smartphones	O

As	O
mentioned	O
,	O
mobile	O
devices	O
have	O
several	O
features	O
that	O
can	O
be	O
used	O
in	O
robotics	O
.	O

Some	O
possibilities	O
of	O
using	O
these	O
features	O
are	O
briefly	O
discussed	O
in	O
the	O
following	O
text	O
.	O

These	O
possibilities	O
are	O
,	O
for	O
sure	O
,	O
non	O
-	O
exhaustive	O
.	O

CPU	O
:	O
Modern	O
smartphones	O
already	O
have	O
processors	O
with	O
clock	O
rates	O
of	O
1	O
GHz	O
or	O
more	O
.	O

Some	O
models	O
also	O
have	O
multi	O
-	O
core	O
processors	O
.	O

These	O
processing	O
units	O
are	O
capable	O
of	O
doing	O
many	O
complex	O
and	O
computationally	O
intensive	O
operations	O
for	O
autonomous	O
robots	O
navigation	O
.	O

Santos	O
et	O
al	O
.	O
[	O
4	O
],	O
for	O
example	O
,	O
showed	O
that	O
it	O
is	O
feasible	O
to	O
execute	O
complex	O
robotics	O
navigation	O
algorithms	O
in	O
processors	O
of	O
older	O
smartphones	O
with	O
300	O
MHz	O
clock	O
speed	O
;	O

Camera	O
:	O
can	O
be	O
used	O
with	O
a	O
variety	O
of	O
algorithms	O
for	O
visual	O
odometry	O
,	O
object	O
recognition	O
,	O
robot	O
attention	O
(	O
the	O
ability	O
to	O
select	O
a	O
topic	O
of	O
interest	O
[	O
5	O
]),	O
obstacle	O
detection	O
and	O
avoidance	O
,	O
object	O
tracking	O
,	O
and	O
others	O
;	O

Compass	O
:	O
can	O
be	O
used	O
to	O
sense	O
the	O
robot	O
’	O
s	O
direction	O
of	O
movement	O
.	O

The	O
system	O
can	O
work	O
with	O
one	O
or	O
two	O
encoders	O
.	O

If	O
only	O
one	O
encoder	O
is	O
used	O
,	O
the	O
compass	O
is	O
used	O
to	O
guarantee	O
that	O
the	O
robot	O
is	O
going	O
in	O
the	O
expected	O
direction	O
and	O
to	O
control	O
the	O
desired	O
curves	O
angles	O
;	O

GPS	O
:	O
can	O
be	O
used	O
to	O
obtain	O
the	O
robot	O
position	O
in	O
outdoor	O
environments	O
,	O
altitude	O
and	O
speed	O
;	O

Accelerometer	O
:	O
can	O
be	O
used	O
to	O
detect	O
speed	O
changes	O
and	O
consequently	O
if	O
the	O
robot	O
has	O
hit	O
an	O
object	O
in	O
any	O
direction	O
(	O
a	O
virtual	O
bumper	O
).	O

It	O
can	O
also	O
detect	O
the	O
robot	O
’	O
s	O
orientation	O
.	O

It	O
is	O
also	O
possible	O
to	O
use	O
Kalman	O
filtering	O
to	O
do	O
sensor	O
fusion	O
of	O
the	O
camera	O
,	O
encoders	O
and	O
accelerometer	O
to	O
get	O
more	O
accurate	O
positioning	O
;	O

Internet	O
:	O
WiFi	O
or	O
other	O
Internet	O
connection	O
can	O
be	O
used	O
to	O
remotely	O
monitor	O
the	O
robot	O
and	O
send	O
commands	O
to	O
it	O
.	O

The	O
robot	O
can	O
also	O
access	O
a	O
cloud	O
system	O
to	O
aid	O
some	O
decision	O
making	O
process	O
and	O
communicate	O
with	O
other	O
robots	O
;	O

Bluetooth	O
:	O
can	O
be	O
used	O
to	O
exchange	O
information	O
with	O
nearby	O
robots	O
and	O
for	O
robot	O
localization	O
;	O

Bluetooth	O
audio	O
:	O
As	O
the	O
standard	O
audio	O
input	O
and	O
output	O
are	O
used	O
for	O
the	O
control	O
system	O
,	O
a	O
bluetooth	O
headset	O
can	O
be	O
paired	O
with	O
the	O
mobile	O
device	O
,	O
allowing	O
the	O
robot	O
to	O
receive	O
voice	O
commands	O
and	O
give	O
synthesized	O
voice	O
feedback	O
to	O
the	O
user	O
.	O

The	O
Android	O
voice	O
recognizer	O
worked	O
well	O
for	O
both	O
English	O
and	O
Portuguese	O
.	O

The	O
user	O
can	O
press	O
a	O
button	O
in	O
the	O
bluetooth	O
headset	O
and	O
say	O
a	O
complex	O
command	O
such	O
as	O
a	O
phrase	O
.	O

The	O
Android	O
system	O
will	O
then	O
return	O
a	O
vector	O
with	O
most	O
probable	O
phrases	O
that	O
the	O
user	O
has	O
said	O
;	O

ROS	O
:	O
The	O
Robot	O
Operating	O
System	O
(	O
ROS	O
)	O
[	O
6	O
]	O
from	O
Willow	O
Garage	O
is	O
already	O
supported	O
in	O
mobile	O
devices	O
running	O
Android	O
using	O
the	O
ros	O
-	O
java	O
branch	O
.	O

Using	O
ROS	O
and	O
the	O
system	O
described	O
in	O
this	O
article	O
,	O
a	O
low	O
cost	O
robot	O
can	O
be	O
built	O
with	O
all	O
the	O
advantages	O
and	O
features	O
of	O
ROS	O
.	O

Contributions	O

The	O
main	O
contributions	O
of	O
this	O
work	O
are	O
:	O
A	O
novel	O
system	O
for	O
controlling	O
actuators	O
using	O
audio	O
channelsA	O
novel	O
system	O
for	O
reading	O
sensors	O
information	O
using	O
audio	O
channelsA	O
closed	O
loop	O
control	O
architecture	O
using	O
the	O
above	O
-	O
mentioned	O
itemsApplication	O
of	O
a	O
camera	O
and	O
laser	O
based	O
distance	O
measurement	O
system	O
for	O
roboticsA	O
low	O
cost	O
mobile	O
robot	O
controlled	O
by	O
smartphones	O
and	O
mobile	O
devices	O
using	O
the	O
techniques	O
introduced	O
in	O
this	O
work	O

Organization	O

This	O
paper	O
is	O
structured	O
as	O
follows	O
:	O
Section	O
2	O
describes	O
previous	O
architectures	O
for	O
mechatronics	O
systems	O
control	O
.	O

Section	O
3	O
introduces	O
the	O
new	O
technique	O
.	O

Section	O
4	O
presents	O
the	O
experimental	O
results	O
of	O
the	O
proposed	O
system	O
.	O

Section	O
5	O
describes	O
a	O
case	O
study	O
with	O
an	O
application	O
of	O
the	O
system	O
to	O
build	O
a	O
low	O
cost	O
mobile	O
robot	O
and	O
in	O
Section	O
6	O
are	O
the	O
final	O
considerations	O
.	O

Related	O
Work	O

This	O
section	O
reviews	O
some	O
of	O
the	O
most	O
relevant	O
related	O
works	O
that	O
uses	O
mobile	O
devices	O
to	O
control	O
robots	O
and	O
their	O
communication	O
interfaces	O
.	O

Digital	O
Data	O
Interfaces	O

Santos	O
et	O
al	O
.	O
[	O
4	O
]	O
analyze	O
the	O
feasibility	O
of	O
using	O
smartphones	O
to	O
execute	O
robot	O
’	O
s	O
autonomous	O
navigation	O
and	O
localization	O
algorithms	O
.	O

In	O
the	O
proposed	O
system	O
,	O
the	O
robot	O
control	O
algorithm	O
is	O
executed	O
in	O
the	O
mobile	O
phone	O
and	O
the	O
motion	O
commands	O
are	O
sent	O
to	O
the	O
robot	O
using	O
bluetooth	O
.	O

Their	O
experiments	O
are	O
made	O
with	O
mobile	O
phones	O
with	O
processor	O
clocks	O
of	O
220	O
MHz	O
and	O
330	O
MHz	O
and	O
they	O
conclude	O
that	O
it	O
is	O
possible	O
and	O
robust	O
to	O
execute	O
complex	O
navigation	O
in	O
these	O
devices	O
even	O
with	O
soft	O
real	O
-	O
time	O
requirements	O
.	O

The	O
tested	O
algorithms	O
are	O
well	O
-	O
known	O
:	O
potential	O
fields	O
,	O
particle	O
filter	O
and	O
extended	O
Kalman	O
filter	O
.	O

Another	O
example	O
of	O
the	O
use	O
of	O
smartphones	O
to	O
control	O
robots	O
is	O
the	O
open	O
source	O
project	O
Cellbots	O
[	O
1	O
]	O
which	O
uses	O
Android	O
based	O
phones	O
to	O
control	O
mobile	O
robots	O
.	O

The	O
project	O
requires	O
a	O
microcontroller	O
that	O
communicates	O
with	O
the	O
phone	O
via	O
bluetooth	O
or	O
serial	O
port	O
and	O
sends	O
the	O
electrical	O
control	O
signals	O
to	O
the	O
motors	O
.	O

The	O
problem	O
is	O
that	O
not	O
all	O
mobile	O
devices	O
have	O
bluetooth	O
or	O
serial	O
ports	O
.	O

Moreover	O
,	O
in	O
some	O
cases	O
the	O
device	O
has	O
the	O
serial	O
port	O
available	O
only	O
internally	O
,	O
requiring	O
disassembly	O
of	O
the	O
device	O
to	O
access	O
the	O
serial	O
port	O
signals	O
.	O

When	O
using	O
bluetooth	O
,	O
the	O
costs	O
are	O
higher	O
because	O
an	O
additional	O
bluetooth	O
module	O
must	O
be	O
installed	O
and	O
connected	O
to	O
the	O
microcontroller	O
.	O

The	O
work	O
of	O
Hess	O
and	O
Rohrig	O
[	O
7	O
]	O
consists	O
of	O
using	O
mobile	O
phones	O
to	O
remotely	O
control	O
a	O
robot	O
.	O

Their	O
system	O
can	O
connect	O
to	O
the	O
robot	O
using	O
TCP	O
/	O
IP	O
interfaces	O
or	O
bluetooth	O
.	O

In	O
the	O
case	O
of	O
the	O
TCP	O
/	O
IP	O
sockets	O
,	O
the	O
connection	O
to	O
the	O
robot	O
is	O
made	O
using	O
an	O
already	O
existing	O
wireless	O
LAN	O
(	O
WiFi	O
)	O
infrastructure	O
.	O

Park	O
et	O
al	O
.	O
[	O
8	O
]	O
describe	O
user	O
interface	O
techniques	O
for	O
using	O
PDAs	O
or	O
smartphones	O
to	O
remotely	O
control	O
robots	O
.	O

Again	O
,	O
the	O
original	O
robot	O
controller	O
is	O
maintained	O
and	O
the	O
mobile	O
device	O
is	O
used	O
simply	O
as	O
a	O
remote	O
control	O
device	O
.	O

Their	O
system	O
commands	O
are	O
exchanged	O
using	O
WiFi	O
wireless	O
networks	O
.	O

Analog	O
Audio	O
Interfaces	O

One	O
interesting	O
alternative	O
is	O
using	O
a	O
dedicated	O
circuit	O
to	O
transform	O
the	O
audio	O
output	O
of	O
the	O
mobile	O
device	O
in	O
a	O
serial	O
port	O
signal	O
[	O
9	O
],	O
but	O
the	O
problem	O
with	O
such	O
approach	O
is	O
that	O
only	O
unidirectional	O
communication	O
is	O
possible	O
,	O
and	O
still	O
,	O
as	O
in	O
the	O
other	O
cases	O
,	O
a	O
microcontroller	O
is	O
needed	O
to	O
decode	O
the	O
serial	O
signal	O
and	O
execute	O
some	O
action	O
.	O

On	O
the	O
other	O
hand	O
,	O
the	O
telecommunications	O
industry	O
frequently	O
uses	O
the	O
Dial	O
Tone	O
Multi	O
Frequency	O
(	O
DTMF	O
)	O
system	O
to	O
exchange	O
remote	O
control	O
commands	O
between	O
equipments	O
.	O

Section	O
3	O
.	O
1	O
contains	O
a	O
description	O
of	O
the	O
DTMF	O
system	O
.	O

The	O
system	O
is	O
more	O
known	O
in	O
telephony	O
for	O
sending	O
the	O
digits	O
that	O
a	O
caller	O
wants	O
to	O
dial	O
to	O
a	O
switching	O
office	O
.	O

DTMF	O
usage	O
to	O
control	O
robots	O
is	O
not	O
new	O
.	O

There	O
are	O
some	O
recent	O
projects	O
that	O
use	O
DTMF	O
digits	O
exchange	O
to	O
remotely	O
control	O
robots	O
:	O
Patil	O
and	O
Henry	O
[	O
10	O
]	O
used	O
a	O
remote	O
mobile	O
phone	O
to	O
telecommand	O
a	O
robot	O
.	O

DTMF	O
tones	O
are	O
sent	O
from	O
the	O
mobile	O
phone	O
to	O
the	O
remote	O
robot	O
’	O
s	O
phone	O
and	O
decoded	O
by	O
a	O
specific	O
integrated	O
circuit	O
and	O
the	O
binary	O
output	O
is	O
connected	O
to	O
a	O
FPGA	O
that	O
controls	O
the	O
robot	O
.	O

Manikandan	O
et	O
al	O
.	O
[	O
11	O
]	O
proposed	O
and	O
built	O
a	O
robot	O
that	O
uses	O
two	O
cell	O
phones	O
.	O

One	O
phone	O
is	O
placed	O
in	O
the	O
robot	O
and	O
another	O
acts	O
as	O
a	O
remote	O
control	O
.	O

The	O
DTMF	O
audio	O
produced	O
by	O
the	O
keys	O
pressed	O
in	O
the	O
remote	O
control	O
phone	O
is	O
sent	O
to	O
the	O
phone	O
installed	O
in	O
the	O
robot	O
,	O
and	O
the	O
audio	O
output	O
of	O
this	O
phone	O
is	O
connected	O
to	O
a	O
DTMF	O
decoder	O
via	O
the	O
earphone	O
output	O
of	O
the	O
cell	O
phone	O
.	O

The	O
4	O
-	O
bit	O
DTMF	O
output	O
is	O
then	O
connected	O
to	O
a	O
microcontroller	O
that	O
interprets	O
the	O
codes	O
and	O
executes	O
the	O
movements	O
related	O
to	O
the	O
keys	O
pressed	O
in	O
the	O
remote	O
control	O
phone	O
.	O

Sai	O
and	O
Sivaramakrishnan	O
[	O
12	O
]	O
used	O
the	O
same	O
setup	O
,	O
where	O
two	O
mobile	O
phones	O
are	O
used	O
,	O
one	O
located	O
at	O
the	O
robot	O
and	O
another	O
used	O
as	O
a	O
remote	O
control	O
.	O

The	O
difference	O
is	O
that	O
the	O
system	O
is	O
applied	O
to	O
different	O
type	O
of	O
robot	O
(	O
mechanically	O
).	O

Naskar	O
et	O
al	O
.	O
[	O
13	O
]	O
presented	O
a	O
work	O
where	O
a	O
remote	O
DTMF	O
keypad	O
is	O
used	O
to	O
control	O
a	O
military	O
robot	O
.	O

Some	O
DTMF	O
digits	O
are	O
even	O
used	O
to	O
fire	O
real	O
guns	O
.	O

The	O
main	O
difference	O
is	O
that	O
instead	O
of	O
transmitting	O
the	O
DTMF	O
tones	O
using	O
a	O
phone	O
call	O
,	O
the	O
tones	O
are	O
transmitted	O
using	O
a	O
radio	O
frequency	O
link	O
.	O

Still	O
about	O
DTMF	O
based	O
control	O
,	O
Ladwa	O
et	O
al	O
.	O
[	O
14	O
]	O
proposed	O
a	O
system	O
that	O
can	O
remotely	O
control	O
home	O
appliances	O
or	O
robots	O
via	O
DTMF	O
tones	O
over	O
telephone	O
calls	O
.	O

The	O
tones	O
are	O
generated	O
by	O
keys	O
pressed	O
in	O
a	O
remote	O
phone	O
keypad	O
,	O
received	O
by	O
a	O
phone	O
installed	O
in	O
the	O
system	O
under	O
control	O
and	O
decoded	O
by	O
a	O
DTMF	O
decoder	O
circuit	O
.	O

A	O
microcontroller	O
then	O
executes	O
some	O
pre	O
-	O
programmed	O
action	O
.	O

A	O
similar	O
work	O
is	O
presented	O
by	O
Cho	O
and	O
Jeon	O
[	O
15	O
]	O
where	O
key	O
presses	O
in	O
a	O
remote	O
phone	O
are	O
sent	O
through	O
a	O
telephone	O
call	O
to	O
a	O
receiver	O
cell	O
phone	O
modem	O
.	O

Its	O
audio	O
output	O
is	O
connected	O
to	O
a	O
DTMF	O
decoder	O
chip	O
which	O
is	O
then	O
connected	O
to	O
a	O
robot	O
control	O
board	O
.	O

As	O
the	O
user	O
presses	O
keys	O
in	O
the	O
remote	O
phone	O
,	O
the	O
robot	O
goes	O
forward	O
,	O
backwards	O
or	O
do	O
curves	O
according	O
with	O
the	O
pressed	O
key	O
(	O
a	O
numerical	O
digit	O
that	O
is	O
represented	O
by	O
a	O
DTMF	O
code	O
).	O

Recently	O
,	O
a	O
startup	O
company	O
created	O
a	O
mobile	O
robot	O
that	O
can	O
be	O
controlled	O
by	O
audio	O
tones	O
from	O
mobile	O
phones	O
[	O
16	O
].	O

The	O
system	O
is	O
limited	O
to	O
controlling	O
two	O
motors	O
and	O
does	O
not	O
have	O
any	O
feedback	O
or	O
sensor	O
reading	O
capability	O
.	O

The	O
alternative	O
is	O
using	O
camera	O
algorithms	O
such	O
as	O
optical	O
flow	O
to	O
implement	O
visual	O
odometry	O
,	O
but	O
even	O
if	O
so	O
,	O
such	O
limitations	O
make	O
it	O
difficult	O
to	O
build	O
a	O
complete	O
mobile	O
robot	O
because	O
of	O
the	O
lack	O
of	O
important	O
sensory	O
information	O
such	O
as	O
bumpers	O
and	O
distance	O
to	O
objects	O
.	O

Also	O
,	O
the	O
information	O
provided	O
in	O
the	O
company	O
website	O
does	O
not	O
make	O
it	O
clear	O
if	O
the	O
wheel	O
speed	O
can	O
be	O
controlled	O
and	O
which	O
audio	O
frequencies	O
are	O
used	O
.	O

With	O
the	O
exception	O
of	O
the	O
example	O
in	O
the	O
last	O
paragraph	O
,	O
all	O
other	O
mentioned	O
examples	O
and	O
projects	O
use	O
DTMF	O
tones	O
to	O
remotely	O
control	O
a	O
distant	O
robot	O
over	O
radio	O
or	O
telephone	O
lines	O
.	O

This	O
system	O
,	O
in	O
contrast	O
,	O
uses	O
DTMF	O
tones	O
to	O
control	O
actuators	O
and	O
read	O
sensors	O
in	O
a	O
scheme	O
where	O
the	O
control	O
unit	O
is	O
physically	O
attached	O
to	O
the	O
robot	O
,	O
or	O
near	O
the	O
robot	O
(	O
connected	O
by	O
an	O
audio	O
cable	O
).	O

The	O
advantage	O
is	O
that	O
DTMF	O
tones	O
are	O
very	O
robust	O
to	O
interference	O
and	O
widely	O
adopted	O
,	O
making	O
it	O
easy	O
to	O
find	O
electrical	O
components	O
and	O
software	O
support	O
for	O
dealing	O
with	O
such	O
system	O
.	O

System	O
Architecture	O

This	O
section	O
describes	O
the	O
proposed	O
system	O
architecture	O
.	O

Its	O
main	O
advantage	O
is	O
to	O
provide	O
a	O
universal	O
connection	O
system	O
to	O
read	O
sensors	O
and	O
control	O
actuators	O
of	O
mechatronics	O
systems	O
.	O

The	O
data	O
is	O
exchanged	O
using	O
audio	O
tones	O
,	O
allowing	O
the	O
technique	O
to	O
be	O
used	O
with	O
any	O
device	O
that	O
has	O
audio	O
input	O
/	O
output	O
interfaces	O
.	O

Theoretical	O
Background	O

The	O
DTMF	O
system	O
was	O
created	O
in	O
the	O
decade	O
of	O
1950	O
as	O
a	O
faster	O
option	O
to	O
the	O
(	O
now	O
obsolete	O
)	O
pulse	O
dialing	O
system	O
.	O

Its	O
main	O
purpose	O
at	O
that	O
time	O
was	O
to	O
send	O
the	O
digits	O
that	O
a	O
caller	O
wants	O
to	O
dial	O
to	O
the	O
switching	O
system	O
of	O
the	O
telephone	O
company	O
.	O

Although	O
almost	O
60	O
years	O
old	O
,	O
DTMF	O
is	O
still	O
widely	O
used	O
in	O
telecommunication	O
systems	O
and	O
is	O
still	O
used	O
in	O
most	O
new	O
telephone	O
designs	O
[	O
17	O
].	O

DTMF	O
tones	O
can	O
be	O
easily	O
heard	O
by	O
pressing	O
the	O
keys	O
on	O
a	O
phone	O
during	O
a	O
telephone	O
call	O
.	O

The	O
system	O
is	O
composed	O
of	O
16	O
different	O
audio	O
frequencies	O
organized	O
in	O
a	O
4	O
×	O
4	O
matrix	O
.	O
Table	O
1	O
shows	O
these	O
frequencies	O
and	O
the	O
corresponding	O
keys	O
/	O
digits	O
.	O

A	O
valid	O
digit	O
is	O
always	O
composed	O
by	O
a	O
pair	O
of	O
frequencies	O
(	O
one	O
from	O
the	O
table	O
columns	O
and	O
one	O
from	O
the	O
table	O
rows	O
)	O
transmitted	O
simultaneously	O
.	O

For	O
example	O
,	O
to	O
transmit	O
the	O
digit	O
9	O
,	O
an	O
audio	O
signal	O
containing	O
the	O
frequencies	O
852	O
Hz	O
and	O
1	O
,	O
477	O
Hz	O
would	O
have	O
to	O
be	O
generated	O
.	O

As	O
DTMF	O
was	O
designed	O
to	O
exchange	O
data	O
via	O
telephone	O
lines	O
that	O
can	O
be	O
noisy	O
,	O
the	O
use	O
of	O
2	O
frequencies	O
to	O
uniquely	O
identify	O
a	O
digit	O
makes	O
the	O
system	O
efficient	O
and	O
very	O
robust	O
to	O
noise	O
and	O
other	O
sounds	O
that	O
do	O
not	O
characterize	O
a	O
valid	O
DTMF	O
digit	O
.	O

In	O
fact	O
,	O
when	O
the	O
DTMF	O
system	O
was	O
designed	O
,	O
the	O
frequencies	O
were	O
chosen	O
to	O
minimize	O
tone	O
pairs	O
from	O
natural	O
sounds	O
[	O
18	O
].	O

The	O
described	O
robustness	O
of	O
DTMF	O
led	O
its	O
use	O
in	O
a	O
variety	O
of	O
current	O
remote	O
automation	O
systems	O
such	O
as	O
residential	O
alarm	O
monitoring	O
,	O
vehicle	O
tracking	O
systems	O
and	O
interactive	O
voice	O
response	O
systems	O
such	O
as	O
bank	O
’	O
s	O
automatic	O
answering	O
machines	O
menus	O
that	O
allows	O
the	O
user	O
to	O
execute	O
interactive	O
operations	O
like	O
“	O
Press	O
1	O
to	O
check	O
your	O
account	O
balance	O
;	O
Press	O
2	O
to	O
block	O
your	O
credit	O
card	O
”.	O

The	O
wide	O
adoption	O
and	O
reliability	O
of	O
the	O
DTMF	O
system	O
led	O
the	O
semiconductor	O
industry	O
to	O
develop	O
low	O
cost	O
integrated	O
circuits	O
(	O
ICs	O
)	O
that	O
can	O
encode	O
and	O
decode	O
DTMF	O
signals	O
from	O
and	O
to	O
digital	O
binary	O
digits	O
.	O

The	O
system	O
proposed	O
in	O
this	O
article	O
uses	O
such	O
ICs	O
to	O
transmit	O
and	O
receive	O
information	O
.	O

Both	O
actuators	O
control	O
and	O
sensors	O
data	O
are	O
encoded	O
using	O
DTMF	O
tones	O
.	O

The	O
following	O
sections	O
describe	O
the	O
system	O
design	O
.	O

Device	O
Control	O

To	O
control	O
actuators	O
,	O
a	O
mobile	O
device	O
generates	O
a	O
DTMF	O
tone	O
.	O

The	O
tone	O
is	O
decoded	O
by	O
a	O
commercial	O
DTMF	O
decoder	O
chip	O
(	O
such	O
as	O
the	O
MT8870	O
),	O
converting	O
the	O
tone	O
to	O
a	O
4	O
-	O
bit	O
binary	O
word	O
equivalent	O
to	O
the	O
DTMF	O
input	O
.	O

The	O
decoded	O
output	O
remains	O
present	O
while	O
the	O
DTMF	O
tone	O
is	O
present	O
at	O
the	O
input	O
.	O

The	O
resulting	O
bits	O
can	O
feed	O
a	O
power	O
circuit	O
to	O
control	O
up	O
to	O
four	O
independent	O
binary	O
(	O
on	O
/	O
off	O
)	O
devices	O
such	O
as	O
robots	O
brakes	O
,	O
lights	O
or	O
a	O
pneumatic	O
gripper	O
.	O
Figure	O
1	O
shows	O
the	O
basic	O
concept	O
of	O
the	O
system	O
.	O

The	O
audio	O
output	O
from	O
the	O
mobile	O
device	O
can	O
be	O
directly	O
connected	O
to	O
the	O
input	O
of	O
the	O
DTMF	O
decoder	O
,	O
but	O
in	O
some	O
specific	O
cases	O
an	O
audio	O
preamplifier	O
should	O
be	O
used	O
to	O
enhance	O
the	O
audio	O
amplitude	O
.	O

Figure	O
2	O
shows	O
a	O
direct	O
current	O
(	O
DC	O
)	O
motor	O
control	O
application	O
where	O
the	O
4	O
-	O
bit	O
output	O
of	O
the	O
decoder	O
is	O
connected	O
to	O
a	O
motor	O
control	O
circuit	O
(	O
an	O
H	O
-	O
bridge	O
,	O
for	O
example	O
,	O
using	O
the	O
L298	O
commercial	O
dual	O
H	O
-	O
bridge	O
IC	O
).	O

As	O
2	O
bits	O
are	O
required	O
to	O
control	O
each	O
motor	O
,	O
the	O
system	O
can	O
control	O
2	O
DC	O
motors	O
independently	O
.	O
Table	O
2	O
shows	O
the	O
DTMF	O
digits	O
and	O
corresponding	O
motor	O
states	O
.	O

Note	O
that	O
these	O
states	O
can	O
be	O
different	O
according	O
to	O
the	O
pin	O
connections	O
between	O
the	O
DTMF	O
decoder	O
and	O
the	O
H	O
-	O
bridge	O
.	O

In	O
order	O
to	O
control	O
the	O
DC	O
motor	O
’	O
s	O
speed	O
,	O
the	O
mobile	O
device	O
turns	O
the	O
DTMF	O
signals	O
on	O
and	O
off	O
in	O
a	O
fixed	O
frequency	O
,	O
mimicking	O
a	O
pulse	O
width	O
modulation	O
(	O
PWM	O
)	O
signal	O
.	O

To	O
control	O
more	O
devices	O
it	O
is	O
possible	O
to	O
take	O
advantage	O
of	O
the	O
fact	O
that	O
most	O
audio	O
outputs	O
of	O
mobile	O
devices	O
are	O
stereo	O
.	O

Thus	O
,	O
generating	O
different	O
audio	O
tones	O
in	O
the	O
left	O
and	O
right	O
channels	O
doubles	O
the	O
number	O
of	O
controlled	O
devices	O
(	O
8	O
different	O
on	O
/	O
off	O
devices	O
or	O
4	O
DC	O
motors	O
).	O

One	O
interesting	O
option	O
,	O
possible	O
only	O
in	O
devices	O
with	O
USB	O
Host	O
feature	O
,	O
such	O
as	O
netbooks	O
and	O
desktop	O
computers	O
,	O
is	O
to	O
add	O
low	O
cost	O
USB	O
multimedia	O
sound	O
devices	O
,	O
increasing	O
the	O
number	O
of	O
audio	O
ports	O
in	O
the	O
system	O
.	O

Another	O
possibility	O
consists	O
in	O
directly	O
connecting	O
servo	O
-	O
motors	O
(	O
the	O
ones	O
used	O
in	O
model	O
airplanes	O
)	O
control	O
signals	O
to	O
the	O
output	O
of	O
the	O
DTMF	O
decoder	O
.	O

As	O
each	O
servo	O
needs	O
only	O
one	O
PWM	O
input	O
signal	O
,	O
each	O
stereo	O
audio	O
channel	O
can	O
drive	O
up	O
to	O
eight	O
servo	O
-	O
motors	O
.	O

Sensor	O
Reading	O

Most	O
mechatronics	O
systems	O
and	O
sensor	O
networks	O
need	O
sensors	O
to	O
sense	O
the	O
surrounding	O
environment	O
and	O
their	O
own	O
state	O
in	O
order	O
to	O
decide	O
what	O
to	O
do	O
next	O
.	O

To	O
accomplish	O
this	O
task	O
in	O
this	O
system	O
,	O
sensors	O
are	O
connected	O
to	O
the	O
input	O
of	O
a	O
DTMF	O
encoder	O
chip	O
(	O
such	O
as	O
the	O
TCM5087	O
).	O

Each	O
time	O
a	O
sensor	O
state	O
changes	O
,	O
the	O
encoder	O
generates	O
a	O
DTMF	O
tone	O
that	O
is	O
captured	O
and	O
analyzed	O
by	O
the	O
mobile	O
device	O
.	O

According	O
to	O
the	O
digits	O
received	O
it	O
is	O
possible	O
to	O
know	O
which	O
sensor	O
generated	O
the	O
tone	O
.	O

More	O
details	O
on	O
how	O
to	O
identify	O
which	O
sensor	O
and	O
its	O
value	O
are	O
provided	O
in	O
Section	O
5	O
.	O
1	O
.	O

As	O
shown	O
in	O
Figure	O
3	O
,	O
up	O
to	O
four	O
sensors	O
can	O
be	O
connected	O
to	O
a	O
DTMF	O
encoder	O
that	O
generates	O
tones	O
according	O
to	O
the	O
sensors	O
states	O
.	O

The	O
generator	O
’	O
s	O
output	O
itself	O
is	O
connected	O
to	O
the	O
audio	O
input	O
of	O
the	O
mobile	O
device	O
which	O
continuously	O
samples	O
the	O
audio	O
input	O
checking	O
if	O
the	O
frequency	O
pair	O
that	O
characterizes	O
a	O
DTMF	O
digit	O
is	O
present	O
in	O
the	O
signal	O
.	O

To	O
accomplish	O
this	O
task	O
,	O
the	O
discrete	O
Fourier	O
transform	O
(	O
DFT	O
)	O
is	O
used	O
,	O
according	O
to	O
Equation	O
(	O
1	O
).	O
(	O
1	O
)	O
X	O
(	O
m	O
)=∑	O
n	O
=	O
0N	O
−	O
1x	O
(	O
n	O
)	O
e	O
−	O
j2πnm	O
/	O
Nwhere	O
X	O
(	O
m	O
)	O
is	O
the	O
frequency	O
magnitude	O
of	O
the	O
signal	O
under	O
analysis	O
at	O
index	O
m	O
,	O
x	O
(	O
n	O
)	O
is	O
the	O
input	O
sequence	O
in	O
time	O
(	O
representing	O
the	O
signal	O
)	O
with	O
n	O
index	O
and	O
N	O
is	O
the	O
DFT	O
number	O
of	O
points	O
.	O

N	O
determines	O
the	O
resolution	O
of	O
the	O
DFT	O
and	O
the	O
number	O
of	O
samples	O
to	O
be	O
analyzed	O
.	O

For	O
performance	O
reasons	O
,	O
a	O
Fast	O
Fourier	O
Transform	O
(	O
FFT	O
)	O
[	O
19	O
]	O
is	O
used	O
to	O
identify	O
the	O
frequency	O
components	O
of	O
the	O
input	O
signal	O
and	O
consequently	O
detect	O
the	O
DTMF	O
digit	O
generated	O
by	O
the	O
DTMF	O
generator	O
that	O
encodes	O
sensor	O
data	O
.	O

For	O
clear	O
and	O
detailed	O
information	O
about	O
these	O
digital	O
signal	O
processing	O
concepts	O
,	O
please	O
refer	O
to	O
Lyons	O
’	O
book	O
[	O
20	O
]	O
on	O
Digital	O
Signal	O
Processing	O
.	O

To	O
optimize	O
the	O
FFT	O
computation	O
it	O
is	O
necessary	O
to	O
specify	O
adequate	O
values	O
for	O
N	O
and	O
Fs	O
(	O
the	O
sample	O
rate	O
of	O
the	O
input	O
signal	O
).	O

From	O
Table	O
1	O
,	O
the	O
highest	O
frequency	O
present	O
in	O
a	O
DTMF	O
tone	O
is	O
1	O
,	O
633	O
Hz	O
.	O

Applying	O
the	O
fundamental	O
sampling	O
theorem	O
results	O
in	O
Fs	O
=	O
3	O
,	O
266	O
Hz	O
(	O
the	O
theorem	O
states	O
that	O
the	O
sample	O
rate	O
should	O
be	O
at	O
least	O
twice	O
the	O
highest	O
signal	O
to	O
be	O
captured	O
).	O

For	O
implementation	O
convenience	O
and	O
better	O
compatibility	O
,	O
a	O
8	O
KHz	O
sample	O
rate	O
is	O
used	O
,	O
which	O
most	O
mobile	O
devices	O
can	O
perform	O
.	O

The	O
lower	O
the	O
number	O
of	O
points	O
in	O
the	O
FFT	O
,	O
the	O
faster	O
the	O
FFT	O
is	O
computed	O
,	O
and	O
more	O
digits	O
per	O
second	O
can	O
be	O
recognized	O
,	O
leading	O
to	O
a	O
better	O
sensor	O
reading	O
frequency	O
.	O

To	O
compute	O
the	O
smallest	O
adequate	O
number	O
of	O
points	O
for	O
the	O
FFT	O
,	O
Equation	O
(	O
2	O
)	O
is	O
used	O
.	O
(	O
2	O
)	O
f	O
(	O
m	O
)=	O
mFsN	O

In	O
Equation	O
(	O
2	O
),	O
f	O
(	O
m	O
)	O
is	O
each	O
frequency	O
under	O
analysis	O
,	O
Fs	O
is	O
the	O
sampling	O
frequency	O
(	O
8	O
KHz	O
)	O
and	O
N	O
the	O
FFT	O
’	O
s	O
number	O
of	O
points	O
to	O
be	O
minimized	O
.	O

Using	O
N	O
=	O
256	O
,	O
results	O
in	O
an	O
analysis	O
resolution	O
of	O
about	O
30	O
Hz	O
,	O
that	O
is	O
enough	O
to	O
differ	O
from	O
one	O
DTMF	O
frequency	O
component	O
to	O
another	O
.	O

This	O
is	O
consistent	O
with	O
the	O
DFT	O
parameters	O
used	O
by	O
Chitode	O
to	O
detect	O
DTMF	O
digits	O
[	O
21	O
].	O

The	O
work	O
developed	O
by	O
Khan	O
also	O
uses	O
N	O
=	O
256	O
and	O
Fs	O
=	O
8	O
KHz	O
to	O
detect	O
DTMF	O
tones	O
[	O
22	O
].	O

Later	O
in	O
this	O
text	O
,	O
Section	O
5	O
.	O
1	O
and	O
Table	O
3	O
explains	O
the	O
use	O
and	O
application	O
of	O
this	O
technique	O
to	O
read	O
four	O
digital	O
(	O
on	O
/	O
off	O
)	O
sensors	O
simultaneously	O
.	O

One	O
of	O
the	O
limitations	O
of	O
the	O
described	O
method	O
is	O
that	O
it	O
is	O
restricted	O
to	O
binary	O
(	O
on	O
/	O
off	O
)	O
sensors	O
.	O

As	O
it	O
is	O
shown	O
is	O
Section	O
5	O
.	O
1	O
,	O
this	O
is	O
enough	O
for	O
many	O
applications	O
,	O
including	O
measuring	O
angles	O
and	O
speeds	O
using	O
incremental	O
optical	O
encoders	O
.	O

In	O
any	O
case	O
,	O
additional	O
electronics	O
could	O
be	O
used	O
to	O
encode	O
analog	O
signals	O
and	O
transmit	O
these	O
signals	O
using	O
the	O
audio	O
interface	O
.	O

As	O
each	O
DTMF	O
digit	O
encodes	O
4	O
bits	O
,	O
the	O
transmission	O
of	O
an	O
analog	O
value	O
converted	O
with	O
a	O
12	O
-	O
bit	O
analog	O
-	O
digital	O
converter	O
would	O
take	O
3	O
transmission	O
cycles	O
.	O

It	O
would	O
also	O
be	O
possible	O
to	O
use	O
digital	O
signal	O
multiplexing	O
hardware	O
to	O
encode	O
more	O
information	O
in	O
the	O
same	O
system	O
(	O
with	O
worse	O
performance	O
).	O

The	O
demultiplexing	O
would	O
be	O
done	O
in	O
the	O
mobile	O
device	O
by	O
software	O
.	O

Experimental	O
Results	O

In	O
order	O
to	O
evaluate	O
the	O
proposed	O
system	O
,	O
an	O
Android	O
application	O
was	O
developed	O
using	O
the	O
Android	O
development	O
kit	O
,	O
which	O
is	O
available	O
for	O
free	O
.	O

Experiments	O
were	O
executed	O
in	O
several	O
mobile	O
devices	O
and	O
desktop	O
computers	O
.	O

For	O
the	O
actuator	O
control	O
subsystem	O
,	O
experiments	O
showed	O
that	O
generating	O
PWM	O
signals	O
by	O
software	O
is	O
possible	O
,	O
but	O
the	O
resulting	O
signal	O
shows	O
variations	O
(	O
a	O
software	O
generated	O
PWM	O
with	O
1	O
ms	O
ON	O
time	O
and	O
1	O
ms	O
OFF	O
time	O
produces	O
a	O
real	O
signal	O
with	O
50	O
ms	O
ON	O
time	O
and	O
50	O
ms	O
OFF	O
time	O
).	O

A	O
better	O
option	O
is	O
to	O
use	O
pre	O
-	O
recorded	O
PWM	O
DTMF	O
tones	O
resulting	O
in	O
high	O
reliability	O
PWM	O
of	O
DTMF	O
tones	O
with	O
frequencies	O
greater	O
than	O
1	O
KHz	O
.	O

As	O
mobile	O
devices	O
have	O
mature	O
software	O
support	O
for	O
playing	O
pre	O
-	O
recorded	O
audio	O
,	O
the	O
PWM	O
plays	O
smoothly	O
with	O
low	O
processor	O
usage	O
.	O

In	O
these	O
experiments	O
it	O
was	O
also	O
observed	O
that	O
another	O
practical	O
way	O
of	O
doing	O
fine	O
speed	O
adjustments	O
consists	O
in	O
controlling	O
the	O
audio	O
output	O
volume	O
,	O
resulting	O
in	O
proportional	O
speed	O
changes	O
in	O
the	O
motor	O
(	O
s	O
).	O

Experiments	O
of	O
the	O
sensor	O
reading	O
subsystem	O
are	O
based	O
on	O
the	O
FFT	O
.	O

The	O
experiments	O
showed	O
that	O
in	O
the	O
worst	O
case	O
,	O
the	O
FFT	O
computation	O
time	O
is	O
17	O
ms	O
,	O
leading	O
to	O
a	O
theoretical	O
limit	O
of	O
executing	O
up	O
to	O
58	O
.	O
8	O
FFTs	O
per	O
second	O
.	O
Figure	O
4	O
shows	O
experimental	O
results	O
of	O
the	O
system	O
running	O
on	O
3	O
different	O
devices	O
.	O

The	O
tested	O
devices	O
were	O
an	O
early	O
Android	O
based	O
phone	O
,	O
the	O
HTC	O
G1	O
with	O
a	O
528	O
MHz	O
ARM	O
processor	O
,	O
an	O
Android	O
based	O
tablet	O
computer	O
with	O
a	O
dual	O
core	O
1	O
GHz	O
ARM	O
processor	O
and	O
a	O
1	O
GHz	O
PC	O
netbook	O
with	O
an	O
Intel	O
Celeron	O
processor	O
(	O
in	O
this	O
case	O
a	O
version	O
of	O
the	O
Android	O
operating	O
system	O
for	O
the	O
x86	O
architecture	O
was	O
used	O
).	O

The	O
FFT	O
was	O
implemented	O
using	O
Java	O
and	O
executed	O
in	O
the	O
virtual	O
machine	O
(	O
dalvik	O
)	O
of	O
the	O
Android	O
system	O
.	O

Using	O
the	O
native	O
development	O
system	O
for	O
Android	O
,	O
thus	O
bypassing	O
the	O
virtual	O
machine	O
,	O
would	O
enhance	O
these	O
results	O
.	O

Another	O
performance	O
improvement	O
can	O
be	O
reached	O
using	O
the	O
Goertzel	O
algorithm	O
[	O
23	O
,	O
24	O
].	O

From	O
Figure	O
4	O
it	O
is	O
possible	O
to	O
note	O
that	O
even	O
the	O
device	O
with	O
less	O
processing	O
power	O
is	O
able	O
to	O
handle	O
about	O
40	O
DTMF	O
digits	O
per	O
second	O
with	O
zero	O
packet	O
loss	O
.	O

There	O
are	O
several	O
causes	O
for	O
the	O
increasing	O
packet	O
loss	O
that	O
starts	O
at	O
40	O
Hz	O
in	O
the	O
plot	O
.	O

One	O
of	O
the	O
causes	O
are	O
the	O
different	O
audio	O
input	O
timings	O
[	O
25	O
]	O
caused	O
by	O
the	O
different	O
audio	O
hardware	O
of	O
each	O
device	O
.	O

Another	O
cause	O
is	O
related	O
to	O
the	O
task	O
scheduler	O
of	O
the	O
Android	O
operating	O
system	O
(	O
and	O
the	O
underlying	O
Linux	O
kernel	O
)	O
that	O
can	O
be	O
indeterministic	O
when	O
the	O
CPU	O
load	O
is	O
high	O
.	O

As	O
a	O
reference	O
for	O
comparison	O
,	O
some	O
performance	O
tests	O
were	O
made	O
in	O
a	O
Lego	O
Mindstorms	O
(	O
TM	O
)	O
robotics	O
kit	O
that	O
is	O
commonly	O
used	O
in	O
educational	O
robotics	O
and	O
some	O
scientific	O
researches	O
.	O

When	O
connected	O
to	O
a	O
computer	O
or	O
smartphone	O
via	O
a	O
bluetooth	O
wireless	O
link	O
,	O
the	O
maximum	O
sensor	O
reading	O
rate	O
of	O
the	O
Lego	O
-	O
NXT	O
brick	O
is	O
20	O
Hz	O
.	O

If	O
several	O
sensors	O
are	O
used	O
,	O
the	O
bandwidth	O
is	O
divided	O
.	O

For	O
example	O
,	O
using	O
2	O
encoders	O
and	O
2	O
touch	O
sensors	O
reduces	O
the	O
sensor	O
reading	O
rate	O
to	O
5	O
Hz	O
per	O
sensor	O
or	O
less	O
.	O

If	O
the	O
NXT	O
brick	O
is	O
connected	O
to	O
a	O
computer	O
using	O
the	O
USB	O
port	O
,	O
then	O
the	O
maximum	O
sensor	O
reading	O
frequency	O
rises	O
to	O
166	O
Hz	O
.	O

If	O
two	O
encoders	O
and	O
two	O
touch	O
sensors	O
(	O
bumpers	O
)	O
are	O
used	O
,	O
then	O
each	O
sensor	O
will	O
be	O
read	O
at	O
a	O
rate	O
of	O
41	O
.	O
5	O
Hz	O
.	O

The	O
performance	O
of	O
the	O
system	O
proposed	O
in	O
this	O
article	O
is	O
comparable	O
to	O
this	O
commercial	O
product	O
as	O
a	O
40	O
Hz	O
rate	O
can	O
be	O
sustained	O
for	O
each	O
sensor	O
in	O
a	O
system	O
with	O
4	O
sensors	O
.	O

Case	O
Study	O
Application	O

The	O
system	O
described	O
in	O
Section	O
3	O
can	O
be	O
applied	O
to	O
several	O
situations	O
where	O
a	O
computing	O
device	O
needs	O
to	O
control	O
actuators	O
and	O
read	O
sensors	O
,	O
such	O
as	O
laboratory	O
experiments	O
,	O
machine	O
control	O
and	O
robotics	O
.	O

In	O
this	O
section	O
,	O
a	O
mobile	O
robot	O
case	O
study	O
is	O
described	O
.	O

Low	O
Cost	O
Mobile	O
Robot	O

As	O
an	O
application	O
example	O
,	O
the	O
presented	O
technique	O
was	O
used	O
to	O
build	O
a	O
low	O
cost	O
educational	O
mobile	O
robot	O
.	O

For	O
the	O
Robot	O
’	O
s	O
frame	O
,	O
wheels	O
,	O
gears	O
and	O
two	O
motors	O
24	O
US	O
dollars	O
were	O
spent	O
.	O

For	O
electronics	O
parts	O
more	O
6	O
US	O
dollars	O
were	O
spent	O
summing	O
up	O
a	O
total	O
of	O
30	O
US	O
dollars	O
to	O
build	O
the	O
robot	O
.	O

As	O
most	O
people	O
own	O
a	O
mobile	O
phone	O
or	O
a	O
smartphone	O
,	O
there	O
is	O
the	O
assumption	O
that	O
the	O
control	O
device	O
will	O
not	O
have	O
to	O
be	O
bought	O
because	O
a	O
mobile	O
device	O
that	O
the	O
user	O
already	O
has	O
will	O
be	O
used	O
.	O

Even	O
if	O
the	O
control	O
device	O
needed	O
to	O
be	O
purchased	O
,	O
the	O
option	O
of	O
using	O
a	O
smartphone	O
would	O
still	O
be	O
good	O
because	O
single	O
board	O
computers	O
,	O
typically	O
used	O
in	O
robots	O
or	O
other	O
robot	O
computers	O
,	O
are	O
more	O
expensive	O
than	O
smartphones	O
.	O

Furthermore	O
,	O
smartphones	O
include	O
camera	O
,	O
battery	O
,	O
Internet	O
connection	O
and	O
a	O
variety	O
of	O
sensors	O
that	O
would	O
have	O
to	O
be	O
bought	O
separately	O
and	O
connected	O
to	O
the	O
robot	O
’	O
s	O
computer	O
.	O

With	O
multi	O
-	O
core	O
smartphones	O
running	O
with	O
clock	O
speeds	O
faster	O
than	O
1	O
GHz	O
and	O
with	O
512	O
MB	O
or	O
1	O
GB	O
of	O
RAM	O
memory	O
,	O
they	O
are	O
a	O
good	O
alternative	O
to	O
traditional	O
robots	O
computers	O
.	O

Important	O
sensors	O
in	O
such	O
kind	O
of	O
robot	O
are	O
the	O
bumpers	O
to	O
detect	O
collisions	O
and	O
encoders	O
to	O
compute	O
odometry	O
.	O
Figure	O
5	O
shows	O
a	O
block	O
diagram	O
connecting	O
bumpers	O
and	O
2	O
wheel	O
encoders	O
to	O
the	O
DTMF	O
generator	O
.	O
Table	O
3	O
shows	O
a	O
truth	O
table	O
with	O
the	O
possible	O
states	O
of	O
each	O
sensor	O
and	O
the	O
corresponding	O
DTMF	O
digits	O
.	O

Instead	O
of	O
using	O
commercial	O
encoders	O
discs	O
,	O
several	O
encoders	O
were	O
designed	O
and	O
printed	O
with	O
a	O
conventional	O
laser	O
printer	O
.	O

The	O
discs	O
were	O
glued	O
to	O
the	O
robot	O
’	O
s	O
wheels	O
and	O
a	O
standard	O
CNY70	O
light	O
reflection	O
sensor	O
was	O
mounted	O
in	O
front	O
of	O
each	O
disc	O
.	O

As	O
can	O
be	O
seen	O
in	O
Table	O
3	O
,	O
there	O
is	O
a	O
unique	O
DTMF	O
digit	O
that	O
corresponds	O
to	O
each	O
possible	O
sensor	O
state	O
.	O

Using	O
basic	O
binary	O
arithmetic	O
it	O
is	O
possible	O
to	O
obtain	O
the	O
individual	O
state	O
of	O
each	O
sensor	O
.	O

For	O
example	O
,	O
from	O
Table	O
3	O
it	O
is	O
known	O
that	O
the	O
bumpers	O
are	O
the	O
bits	O
0	O
and	O
1	O
.	O

Using	O
a	O
bitwise	O
AND	O
operation	O
with	O
the	O
binary	O
mask	O
0001	O
will	O
filter	O
all	O
other	O
sensor	O
states	O
and	O
the	O
result	O
will	O
be	O
either	O
0	O
or	O
1	O
,	O
indicating	O
the	O
left	O
bumper	O
state	O
.	O

For	O
the	O
right	O
bumper	O
,	O
the	O
same	O
AND	O
operation	O
can	O
be	O
applied	O
with	O
the	O
binary	O
mask	O
0010	O
.	O

Furthermore	O
,	O
using	O
the	O
binary	O
0011	O
mask	O
and	O
the	O
AND	O
operation	O
will	O
only	O
return	O
a	O
value	O
different	O
than	O
zero	O
if	O
both	O
bumpers	O
are	O
activate	O
at	O
the	O
same	O
time	O
.	O

Using	O
these	O
types	O
of	O
comparisons	O
it	O
is	O
then	O
possible	O
to	O
know	O
the	O
state	O
of	O
each	O
sensor	O
.	O

In	O
the	O
case	O
of	O
the	O
optical	O
encoders	O
,	O
the	O
system	O
’	O
s	O
software	O
monitors	O
for	O
state	O
transitions	O
and	O
add	O
a	O
unit	O
for	O
each	O
transition	O
to	O
a	O
counter	O
that	O
keeps	O
how	O
many	O
pulses	O
each	O
encoder	O
generated	O
.	O

As	O
seen	O
in	O
the	O
Figure	O
5	O
,	O
up	O
to	O
four	O
sensors	O
can	O
be	O
connected	O
to	O
each	O
mono	O
audio	O
channel	O
,	O
allowing	O
closed	O
loop	O
control	O
of	O
up	O
to	O
4	O
motors	O
if	O
4	O
encoders	O
are	O
used	O
.	O

Using	O
the	O
number	O
of	O
pulses	O
accounted	O
for	O
each	O
encoder	O
it	O
is	O
possible	O
to	O
compute	O
displacement	O
and	O
speed	O
for	O
each	O
wheel	O
as	O
it	O
is	O
done	O
with	O
other	O
incremental	O
encoders	O
.	O

This	O
information	O
can	O
be	O
used	O
in	O
classical	O
odometry	O
and	O
localization	O
systems	O
to	O
obtain	O
the	O
robot	O
’	O
s	O
position	O
in	O
a	O
Cartesian	O
space	O
[	O
26	O
,	O
27	O
].	O

To	O
properly	O
design	O
a	O
robot	O
with	O
the	O
presented	O
technique	O
,	O
a	O
relation	O
between	O
wheel	O
dimensions	O
and	O
the	O
maximum	O
linear	O
speed	O
that	O
can	O
be	O
measured	O
is	O
introduced	O
here	O
.	O

In	O
Equation	O
(	O
3	O
),	O
VMax	O
is	O
the	O
maximum	O
linear	O
speed	O
of	O
the	O
robot	O
that	O
can	O
be	O
measured	O
,	O
r	O
is	O
radius	O
of	O
the	O
wheel	O
,	O
c	O
is	O
the	O
maximum	O
digits	O
per	O
second	O
detection	O
capacity	O
of	O
the	O
mobile	O
device	O
and	O
s	O
is	O
the	O
encoder	O
disc	O
resolution	O
(	O
number	O
of	O
DTMF	O
digits	O
generated	O
at	O
each	O
complete	O
wheel	O
revolution	O
).	O
(	O
3	O
)	O
VMax	O
=	O
2πrcs	O

Table	O
4	O
shows	O
the	O
distance	O
measurement	O
resolution	O
and	O
maximum	O
speed	O
that	O
can	O
be	O
measured	O
according	O
to	O
the	O
given	O
equation	O
considering	O
several	O
encoder	O
resolutions	O
.	O

Figure	O
6	O
shows	O
odometry	O
experimental	O
results	O
for	O
this	O
low	O
cost	O
robot	O
.	O

The	O
error	O
bars	O
are	O
the	O
standard	O
deviation	O
of	O
the	O
real	O
displacement	O
that	O
occurred	O
.	O

The	O
blue	O
line	O
shows	O
the	O
real	O
traveled	O
distance	O
and	O
the	O
red	O
line	O
shows	O
the	O
distance	O
measured	O
by	O
the	O
mobile	O
phone	O
using	O
the	O
proposed	O
technique	O
.	O

Each	O
point	O
in	O
the	O
graph	O
is	O
the	O
average	O
value	O
of	O
ten	O
samples	O
.	O

According	O
to	O
McComb	O
and	O
Predko	O
,	O
odometry	O
errors	O
are	O
unavoidable	O
due	O
to	O
several	O
factors	O
such	O
as	O
wheels	O
’	O
slip	O
and	O
small	O
measurement	O
errors	O
in	O
the	O
wheel	O
radius	O
that	O
accumulate	O
over	O
time	O
.	O

They	O
say	O
that	O
a	O
displacements	O
of	O
6	O
to	O
9	O
meters	O
leads	O
to	O
15	O
centimeters	O
odometer	O
error	O
[	O
28	O
]	O
or	O
more	O
,	O
which	O
is	O
a	O
percentual	O
error	O
of	O
1	O
.	O
6	O
%–	O
2	O
.	O
5	O
%.	O

The	O
greatest	O
odometry	O
error	O
of	O
the	O
system	O
was	O
3	O
.	O
7	O
%	O
for	O
74	O
cm	O
range	O
.	O

But	O
for	O
130	O
cm	O
displacements	O
the	O
error	O
was	O
1	O
centimeter	O
(	O
0	O
.	O
76	O
%).	O

These	O
values	O
show	O
that	O
the	O
proposed	O
system	O
performance	O
is	O
consistent	O
with	O
classical	O
odometry	O
errors	O
described	O
in	O
the	O
literature	O
.	O

To	O
close	O
the	O
control	O
loop	O
,	O
the	O
computed	O
odometry	O
information	O
is	O
sent	O
to	O
a	O
classical	O
PI	O
(	O
Proportional	O
-	O
Integral	O
)	O
controller	O
that	O
has	O
as	O
set	O
-	O
points	O
(	O
or	O
goals	O
)	O
the	O
desired	O
distance	O
to	O
be	O
displaced	O
by	O
the	O
robot	O
.	O

The	O
encoders	O
are	O
read	O
at	O
a	O
40	O
Hz	O
rate	O
,	O
the	O
position	O
is	O
computed	O
and	O
sent	O
to	O
the	O
controller	O
to	O
decide	O
if	O
the	O
robot	O
has	O
to	O
go	O
faster	O
,	O
stop	O
or	O
walk	O
.	O

If	O
any	O
of	O
the	O
bumpers	O
are	O
activated	O
in	O
the	O
meantime	O
,	O
the	O
control	O
loop	O
is	O
interrupted	O
and	O
the	O
robot	O
immediately	O
stops	O
.	O

Although	O
most	O
mobile	O
devices	O
have	O
the	O
possibility	O
of	O
recording	O
and	O
reproducing	O
sounds	O
,	O
not	O
all	O
of	O
them	O
have	O
physical	O
connectors	O
for	O
both	O
the	O
audio	O
input	O
and	O
output	O
.	O

To	O
solve	O
this	O
problem	O
in	O
one	O
of	O
the	O
tested	O
devices	O
that	O
does	O
not	O
have	O
an	O
audio	O
input	O
connector	O
,	O
an	O
earphone	O
is	O
attached	O
near	O
the	O
built	O
-	O
in	O
microphone	O
of	O
the	O
device	O
using	O
a	O
suction	O
cup	O
.	O

In	O
this	O
particular	O
case	O
,	O
an	O
audio	O
preamplifier	O
must	O
be	O
used	O
to	O
generate	O
tones	O
with	O
sufficient	O
amplitude	O
to	O
be	O
detected	O
.	O

The	O
DTMF	O
tones	O
encoding	O
sensors	O
data	O
is	O
generated	O
,	O
amplified	O
and	O
sent	O
to	O
the	O
earphone	O
fixed	O
very	O
near	O
the	O
built	O
-	O
in	O
microphone	O
of	O
the	O
mobile	O
device	O
.	O

It	O
is	O
worth	O
mentioning	O
that	O
this	O
scheme	O
works	O
reliably	O
because	O
DTMF	O
system	O
was	O
designed	O
to	O
avoid	O
interference	O
from	O
natural	O
sounds	O
such	O
as	O
music	O
and	O
people	O
’	O
s	O
voices	O
[	O
18	O
].	O

Human	B-OG
Machine	O
Interface	O

Users	O
can	O
control	O
this	O
robot	O
from	O
the	O
web	O
or	O
using	O
voice	O
commands	O
.	O

Both	O
a	O
web	O
server	O
and	O
a	O
voice	O
recognition	O
system	O
were	O
implemented	O
.	O

The	O
web	O
-	O
server	O
is	O
embedded	O
into	O
the	O
application	O
,	O
therefore	O
no	O
intermediate	O
computers	O
or	O
servers	O
are	O
needed	O
.	O

Any	O
Internet	O
enabled	O
device	O
can	O
access	O
the	O
web	O
-	O
page	O
and	O
issue	O
several	O
commands	O
to	O
move	O
the	O
robot	O
forward	O
,	O
back	O
,	O
or	O
do	O
curves	O
.	O

For	O
debugging	O
purposes	O
the	O
web	O
-	O
server	O
also	O
shows	O
variable	O
values	O
such	O
as	O
distance	O
,	O
encoder	O
pulses	O
and	O
recognized	O
DTMF	O
pulses	O
from	O
sensors	O
.	O

The	O
voice	O
recognizer	O
system	O
is	O
straightforward	O
to	O
implement	O
thanks	O
to	O
the	O
Android	O
API	O
.	O

When	O
the	O
user	O
issues	O
a	O
voice	O
command	O
,	O
the	O
operating	O
systems	O
understands	O
it	O
(	O
in	O
several	O
languages	O
)	O
and	O
passes	O
a	O
vector	O
of	O
strings	O
to	O
the	O
robot	O
’	O
s	O
control	O
application	O
with	O
the	O
most	O
probable	O
phrases	O
said	O
.	O

The	O
application	O
just	O
has	O
to	O
select	O
the	O
one	O
that	O
better	O
fits	O
the	O
expected	O
command	O
.	O

Example	O
voice	O
commands	O
are	O
“	O
Walk	O
30	O
centimeters	O
”	O
or	O
“	O
Forward	O
1	O
meter	O
”.	O

The	O
numbers	O
said	O
by	O
the	O
user	O
are	O
automatically	O
converted	O
to	O
numeric	O
values	O
by	O
the	O
Android	O
API	O
,	O
making	O
it	O
easy	O
to	O
implement	O
softwares	O
that	O
makes	O
the	O
robot	O
move	O
for	O
some	O
distance	O
using	O
closed	O
loop	O
control	O
.	O

Distance	O
Measurement	O

An	O
important	O
sensor	O
to	O
aid	O
the	O
navigation	O
of	O
autonomous	O
mobile	O
robots	O
is	O
the	O
distance	O
measurement	O
from	O
the	O
robot	O
to	O
obstacles	O
in	O
front	O
of	O
it	O
.	O

This	O
task	O
is	O
typically	O
performed	O
by	O
ultrasound	O
or	O
laser	O
sensors	O
.	O

Another	O
approach	O
is	O
based	O
on	O
stereo	O
vision	O
,	O
but	O
the	O
computational	O
costs	O
are	O
high	O
.	O

To	O
support	O
distance	O
measurement	O
in	O
this	O
low	O
cost	O
robot	O
,	O
a	O
laser	O
module	O
(	O
laser	O
pointer	O
)	O
is	O
used	O
to	O
project	O
a	O
brilliant	O
red	O
dot	O
in	O
the	O
object	O
in	O
front	O
of	O
the	O
robot	O
.	O

The	O
camera	O
then	O
captures	O
a	O
frame	O
and	O
uses	O
the	O
projected	O
dot	O
position	O
on	O
its	O
image	O
plane	O
to	O
compute	O
the	O
distance	O
to	O
the	O
obstacle	O
based	O
on	O
simple	O
trigonometry	O
.	O

This	O
method	O
is	O
described	O
by	O
Danko	O
[	O
29	O
]	O
and	O
better	O
explained	O
by	O
Portugal	O
-	O
Zambrano	O
and	O
Mena	O
-	O
Chalco	O
[	O
30	O
].	O

The	O
algorithm	O
assumes	O
that	O
the	O
brightest	O
pixels	O
on	O
the	O
captured	O
image	O
are	O
on	O
the	O
laser	O
projected	O
dot	O
.	O

Figure	O
7	O
depicts	O
how	O
the	O
system	O
works	O
.	O

A	O
laser	O
pointer	O
parallel	O
to	O
the	O
camera	O
emits	O
a	O
focused	O
red	O
dot	O
that	O
is	O
projected	O
in	O
an	O
object	O
at	O
distance	O
D	O
from	O
the	O
robot	O
.	O

This	O
red	O
dot	O
is	O
reflected	O
and	O
projected	O
in	O
the	O
camera	O
’	O
s	O
image	O
plane	O
.	O

The	O
distance	O
pfc	O
(	O
pixels	O
from	O
center	O
)	O
between	O
the	O
center	O
of	O
the	O
image	O
plane	O
(	O
in	O
the	O
optical	O
axis	O
)	O
and	O
the	O
red	O
dot	O
in	O
the	O
image	O
plane	O
is	O
proportional	O
to	O
the	O
distance	O
D	O
.	O

Equation	O
(	O
4	O
)	O
shows	O
how	O
to	O
compute	O
the	O
distance	O
using	O
described	O
system	O
.	O

The	O
distance	O
between	O
the	O
camera	O
and	O
the	O
laser	O
(	O
H	O
)	O
is	O
known	O
previously	O
,	O
the	O
number	O
of	O
pixels	O
from	O
the	O
image	O
center	O
to	O
the	O
red	O
laser	O
dot	O
(	O
pfc	O
)	O
is	O
obtained	O
from	O
the	O
image	O
.	O

The	O
radians	O
per	O
pixels	O
(	O
rpc	O
)	O
and	O
the	O
radian	O
offset	O
(	O
ro	O
)	O
are	O
obtained	O
calibrating	O
the	O
system	O
,	O
which	O
consists	O
of	O
taking	O
several	O
measurements	O
of	O
objects	O
at	O
known	O
distances	O
and	O
their	O
pixels	O
distance	O
from	O
center	O
(	O
pfc	O
).	O

Then	O
a	O
linear	O
regression	O
algorithm	O
finds	O
the	O
best	O
ro	O
and	O
rpc	O
.	O

Details	O
on	O
this	O
calibration	O
can	O
be	O
found	O
on	O
the	O
work	O
of	O
Portugal	O
-	O
Zambrano	O
and	O
Mena	O
-	O
Chalco	O
[	O
30	O
].	O
(	O
4	O
)	O
D	O
=	O
Htan	O
(	O
pfc	O
*	O
rpc	O
+	O
ro	O

As	O
can	O
be	O
seem	O
in	O
Equation	O
(	O
4	O
),	O
the	O
measurement	O
range	O
depends	O
mainly	O
on	O
the	O
baseline	O
H	O
given	O
by	O
the	O
distance	O
between	O
the	O
laser	O
and	O
the	O
camera	O
and	O
the	O
number	O
of	O
pixels	O
from	O
the	O
image	O
center	O
,	O
pfc	O
,	O
that	O
has	O
a	O
limit	O
given	O
by	O
the	O
camera	O
resolution	O
.	O

This	O
equation	O
can	O
be	O
used	O
to	O
determine	O
the	O
measurement	O
range	O
.	O

As	O
the	O
object	O
gets	O
farther	O
away	O
,	O
its	O
pfc	O
tends	O
to	O
zero	O
.	O

Assuming	O
pfc	O
to	O
be	O
zero	O
it	O
is	O
possible	O
to	O
simplify	O
Equation	O
(	O
4	O
)	O
to	O
Equation	O
(	O
5	O
)	O
which	O
gives	O
the	O
maximum	O
distance	O
that	O
can	O
be	O
measured	O
.	O

In	O
the	O
same	O
way	O
,	O
the	O
minimum	O
distance	O
is	O
given	O
by	O
half	O
the	O
camera	O
resolution	O
(	O
because	O
the	O
measurement	O
is	O
made	O
from	O
the	O
point	O
to	O
the	O
center	O
of	O
image	O
).	O
Equation	O
(	O
6	O
)	O
specifies	O
the	O
minimum	O
measurement	O
distance	O
.	O
Table	O
5	O
shows	O
some	O
possible	O
range	O
values	O
computed	O
using	O
these	O
equations	O
.	O
(	O
5	O
)	O
Dmax	O
=	O
Htan	O
(	O
ro	O
)	O
(	O
6	O
)	O
Dmin	O
=	O
Htan	O
(	O
r2	O
*	O
rpc	O
+	O
ro	O
)	O

Block	O
Diagram	O

Figure	O
8	O
shows	O
a	O
block	O
diagram	O
of	O
the	O
system	O
.	O

Each	O
task	O
is	O
executed	O
in	O
a	O
separated	O
thread	O
,	O
thereby	O
reading	O
sensors	O
and	O
controlling	O
motors	O
do	O
not	O
interfere	O
with	O
each	O
other	O
.	O

A	O
task	O
planner	O
module	O
allows	O
the	O
system	O
to	O
integrate	O
the	O
distance	O
measurement	O
,	O
voice	O
commands	O
and	O
web	O
interface	O
.	O

The	O
system	O
running	O
with	O
all	O
these	O
subsystems	O
used	O
between	O
10	O
%	O
and	O
45	O
%	O
of	O
the	O
processor	O
in	O
all	O
devices	O
,	O
leaving	O
room	O
to	O
also	O
execute	O
complex	O
algorithms	O
embedded	O
on	O
the	O
robot	O
.	O

Experimental	O
Results	O

The	O
algorithm	O
implementation	O
is	O
straightforward	O
:	O
the	O
system	O
has	O
to	O
scan	O
a	O
region	O
of	O
the	O
image	O
for	O
a	O
group	O
of	O
pixels	O
with	O
the	O
greatest	O
values	O
(	O
255	O
)	O
in	O
the	O
red	O
channel	O
.	O

The	O
current	O
implementation	O
searches	O
for	O
a	O
pattern	O
of	O
5	O
pixels	O
in	O
a	O
cross	O
shape	O
.	O

The	O
center	O
of	O
this	O
cross	O
is	O
the	O
pfc	O
value	O
.	O
Figure	O
9	O
shows	O
the	O
results	O
for	O
3	O
different	O
distances	O
.	O

The	O
red	O
dot	O
found	O
by	O
the	O
algorithm	O
is	O
shown	O
by	O
a	O
green	O
circle	O
,	O
and	O
the	O
green	O
line	O
shows	O
the	O
distance	O
from	O
the	O
laser	O
dot	O
to	O
the	O
image	O
center	O
.	O

The	O
baseline	O
used	O
is	O
4	O
.	O
5	O
centimeters	O
and	O
after	O
executing	O
a	O
linear	O
regression	O
with	O
a	O
spreadsheet	O
,	O
the	O
calibration	O
values	O
found	O
are	O
ro	O
=	O
0	O
.	O
074	O
and	O
rpc	O
=	O
0	O
.	O
008579	O
.	O

Table	O
6	O
shows	O
experimental	O
results	O
of	O
the	O
system	O
.	O

The	O
average	O
error	O
is	O
2	O
.	O
55	O
%	O
and	O
the	O
maximum	O
observed	O
error	O
is	O
8	O
.	O
5	O
%,	O
which	O
happened	O
at	O
the	O
limit	O
of	O
the	O
measurement	O
range	O
.	O

The	O
range	O
of	O
operation	O
goes	O
from	O
15	O
cm	O
to	O
60	O
cm	O
,	O
but	O
that	O
can	O
be	O
changed	O
modifying	O
the	O
H	O
distance	O
.	O

The	O
advantage	O
of	O
such	O
system	O
is	O
that	O
the	O
processing	O
needed	O
is	O
very	O
low	O
:	O
the	O
system	O
has	O
to	O
find	O
the	O
brightest	O
red	O
dot	O
on	O
a	O
small	O
limited	O
region	O
of	O
interest	O
in	O
the	O
image	O
,	O
and	O
then	O
compute	O
the	O
distance	O
using	O
simple	O
trigonometric	O
relations	O
.	O

The	O
implementation	O
computes	O
distance	O
at	O
a	O
rate	O
of	O
9	O
frames	O
per	O
second	O
in	O
the	O
mobile	O
device	O
while	O
running	O
the	O
FFTs	O
and	O
closed	O
loop	O
control	O
system	O
described	O
.	O

This	O
makes	O
this	O
approach	O
an	O
interesting	O
solution	O
to	O
distance	O
measurement	O
in	O
robotics	O
systems	O
.	O

Figures	O
10	O
,	O
11	O
and	O
12	O
show	O
photos	O
of	O
the	O
robot	O
under	O
the	O
control	O
of	O
different	O
devices	O
.	O

Thanks	O
to	O
the	O
portability	O
of	O
the	O
Android	O
system	O
,	O
the	O
same	O
software	O
can	O
be	O
used	O
in	O
PC	O
computers	O
and	O
mobile	O
devices	O
using	O
ARM	O
processors	O
.	O

Although	O
a	O
proof	O
of	O
concept	O
was	O
developed	O
using	O
the	O
Android	O
operating	O
system	O
,	O
the	O
proposed	O
architecture	O
can	O
be	O
used	O
with	O
any	O
system	O
or	O
programming	O
language	O
that	O
can	O
produce	O
and	O
record	O
sounds	O
.	O

One	O
should	O
note	O
that	O
the	O
main	O
contribution	O
of	O
this	O
work	O
is	O
the	O
communication	O
scheme	O
,	O
so	O
these	O
photos	O
show	O
a	O
provisional	O
robot	O
’	O
s	O
assembly	O
setup	O
used	O
to	O
validate	O
the	O
proposed	O
architecture	O
for	O
robotics	O
.	O

Conclusions	O

This	O
paper	O
introduces	O
a	O
simple	O
but	O
universal	O
control	O
architecture	O
that	O
enables	O
a	O
wide	O
variety	O
of	O
devices	O
to	O
implement	O
control	O
of	O
mechatronics	O
and	O
automation	O
systems	O
.	O

The	O
method	O
can	O
be	O
used	O
to	O
implement	O
closed	O
loop	O
control	O
systems	O
in	O
mechatronics	O
systems	O
using	O
audio	O
channels	O
of	O
computing	O
devices	O
,	O
allowing	O
the	O
processing	O
unit	O
to	O
be	O
easily	O
replaced	O
without	O
the	O
need	O
of	O
pairing	O
or	O
special	O
configurations	O
.	O

Several	O
obsolete	O
and	O
current	O
devices	O
can	O
be	O
used	O
to	O
control	O
robots	O
such	O
as	O
PDAs	O
,	O
phones	O
and	O
computers	O
.	O

Even	O
an	O
MP3	O
player	O
could	O
be	O
used	O
if	O
control	O
without	O
feedback	O
is	O
needed	O
.	O

The	O
sound	O
produced	O
by	O
the	O
player	O
would	O
drive	O
the	O
motors	O
.	O

As	O
an	O
application	O
example	O
,	O
the	O
presented	O
method	O
is	O
used	O
to	O
build	O
a	O
mobile	O
robot	O
with	O
differential	O
drive	O
.	O

The	O
robot	O
’	O
s	O
complete	O
costs	O
,	O
including	O
frame	O
,	O
motors	O
,	O
sensors	O
and	O
electronics	O
is	O
less	O
than	O
30	O
US	O
dollars	O
(	O
in	O
small	O
quantities	O
),	O
and	O
the	O
parts	O
can	O
be	O
easily	O
found	O
in	O
stores	O
or	O
on	O
the	O
Internet	O
.	O

The	O
mentioned	O
price	O
does	O
not	O
include	O
the	O
mobile	O
device	O
.	O

The	O
method	O
can	O
be	O
used	O
for	O
several	O
applications	O
such	O
as	O
educational	O
robotics	O
,	O
low	O
cost	O
robotics	O
research	O
platforms	O
,	O
telepresence	O
robots	O
,	O
autonomous	O
and	O
remotely	O
controlled	O
robots	O
.	O

In	O
engineering	O
courses	O
it	O
is	O
also	O
a	O
motivation	O
for	O
students	O
to	O
learn	O
digital	O
signal	O
processing	O
theory	O
,	O
and	O
all	O
the	O
other	O
multidisciplinary	O
fields	O
involved	O
in	O
robotics	O
.	O

Another	O
interesting	O
application	O
of	O
this	O
system	O
is	O
to	O
build	O
sensor	O
networks	O
composed	O
of	O
smartphones	O
that	O
can	O
gather	O
data	O
from	O
their	O
internal	O
sensors	O
and	O
poll	O
external	O
sensors	O
via	O
audio	O
tones	O
,	O
allowing	O
sensor	O
networks	O
to	O
be	O
easily	O
built	O
and	O
scaled	O
using	O
commercial	O
off	O
-	O
the	O
-	O
shelf	O
mobile	O
devices	O
instead	O
of	O
specific	O
boards	O
and	O
development	O
kits	O
.	O

DTMF	O
decoder	O
with	O
four	O
independent	O
outputs	O
controlled	O
by	O
audio	O
from	O
a	O
mobile	O
device	O
.	O

Dual	O
motor	O
control	O
using	O
one	O
mono	O
audio	O
channel	O
.	O

Sensors	O
input	O
using	O
a	O
DTMF	O
generator	O
.	O

DTMF	O
digit	O
recognition	O
performance	O
in	O
different	O
devices	O
.	O

Sensors	O
connection	O
in	O
a	O
mobile	O
robot	O
with	O
differential	O
drive	O
.	O

Experimental	O
odometry	O
results	O
.	O

X	O
axis	O
is	O
the	O
real	O
traveled	O
distance	O
manually	O
measured	O
with	O
a	O
tape	O
measure	O
.	O

Y	O
axis	O
is	O
the	O
distance	O
computed	O
by	O
the	O
mobile	O
device	O
using	O
the	O
proposed	O
system	O
with	O
data	O
from	O
the	O
encoders	O
.	O

Distance	O
measurement	O
system	O
using	O
a	O
camera	O
and	O
a	O
laser	O
pointer	O
.	O

H	O
is	O
the	O
distance	O
between	O
the	O
camera	O
optical	O
axis	O
and	O
the	O
laser	O
pointer	O
,	O
D	O
the	O
distance	O
between	O
the	O
camera	O
and	O
the	O
object	O
,	O
theta	O
is	O
the	O
angle	O
between	O
the	O
camera	O
’	O
s	O
optical	O
axis	O
and	O
the	O
laser	O
reflected	O
by	O
the	O
object	O
.	O
pfc	O
(	O
pixels	O
from	O
center	O
)	O
is	O
the	O
distance	O
in	O
pixels	O
from	O
the	O
center	O
of	O
the	O
image	O
and	O
the	O
red	O
dot	O
.	O

Figure	O
adapted	O
from	O
Danko	O
and	O
Portugal	O
-	O
Zambrano	O
[	O
29	O
,	O
30	O
].	O

Block	O
diagram	O
of	O
the	O
robot	O
’	O
s	O
software	O
.	O

Image	O
seen	O
by	O
the	O
robot	O
’	O
s	O
camera	O
of	O
the	O
same	O
object	O
at	O
different	O
distances	O
.	O

Note	O
the	O
distance	O
of	O
the	O
laser	O
dot	O
to	O
the	O
image	O
center	O
(	O
shown	O
by	O
the	O
green	O
line	O
)	O
when	O
the	O
object	O
is	O
at	O
different	O
distances	O
.	O

Robot	O
under	O
the	O
control	O
of	O
a	O
mobile	O
phone	O
.	O

The	O
audio	O
input	O
and	O
output	O
channels	O
are	O
connected	O
in	O
a	O
single	O
connector	O
below	O
the	O
phone	O
.	O

Robot	O
under	O
the	O
control	O
of	O
a	O
tablet	O
computer	O
.	O

The	O
audio	O
output	O
is	O
driven	O
from	O
a	O
P2	O
connector	O
attached	O
to	O
the	O
earphone	O
jack	O
and	O
the	O
audio	O
input	O
is	O
captured	O
by	O
the	O
built	O
-	O
in	O
microphone	O
of	O
the	O
device	O
.	O

Note	O
the	O
suction	O
cup	O
holding	O
an	O
earphone	O
near	O
the	O
microphone	O
.	O

Robot	O
under	O
the	O
control	O
of	O
a	O
netbook	O
computer	O
.	O

Audio	O
input	O
and	O
output	O
channels	O
are	O
connected	O
with	O
independent	O
P2	O
connectors	O
.	O

This	O
is	O
the	O
most	O
common	O
case	O
for	O
computers	O
.	O

DTMF	O
frequencies	O
pairs	O
and	O
corresponding	O
digits	O
.	O

Adapted	O
from	O
the	O
Audio	O
Engineer	O
’	O
s	O
Reference	O
Book	O
[	O
17	O
].	O

1	O
,	O
209	O
Hz	O

1	O
,	O
336	O
Hz	O

1	O
,	O
477	O
Hz	O

1	O
,	O
633	O
Hz	O

697	O
Hz	O

1	O

2	O

3	O

A	O

770	O
Hz	O

4	O

5	O

6	O

B	O

852	O
Hz	O

7	O

8	O

9	O

C	O

941	O
Hz	O

*	O

0	O

#	O

D	O

DTMF	O
digits	O
and	O
corresponding	O
motors	O
states	O
.	O

DTMF	O
digit	O

Binary	O
word	O

Motor	O
state	O

Motor	O
A	O

Motor	O
B	O

None	O

00	O
00	O

Stopped	O

Stopped	O

D	O

00	O
00	O

Stopped	O

Stopped	O

1	O

00	O
01	O

Stopped	O

Left	O
spin	O

2	O

00	O
10	O

Stopped	O

Right	O
spin	O

3	O

00	O
11	O

Stopped	O

Invalid	O

4	O

01	O
00	O

Left	O
spin	O

Stopped	O

5	O

01	O
01	O

Left	O
spin	O

Left	O
spin	O

6	O

01	O
10	O

Left	O
spin	O

Right	O
spin	O

7	O

01	O
11	O

Left	O
spin	O

Invalid	O

8	O

10	O
00	O

Right	O
spin	O

Stopped	O

9	O

10	O
01	O

Right	O
spin	O

Left	O
spin	O

0	O

10	O
10	O

Right	O
spin	O

Right	O
spin	O

*	O

10	O
11	O

Right	O
spin	O

Invalid	O

#	O

11	O
00	O

Invalid	O

Stopped	O

A	O

11	O
01	O

Invalid	O

Left	O
spin	O

B	O

11	O
10	O

Invalid	O

Right	O
spin	O

C	O

11	O
11	O

Invalid	O

Invalid	O

Truth	O
table	O
used	O
with	O
4	O
sensors	O
input	O
used	O
in	O
the	O
case	O
study	O
robot	O
.	O

Left	O
Encoder	O
(	O
bit	O
3	O
)	O

Right	O
encoder	O
(	O
bit	O
2	O
)	O

Right	O
bumper	O
(	O
bit	O
1	O
)	O

Left	O
bumper	O
(	O
bit	O
0	O
)	O

DTMF	O
Digit	O

0	O

0	O

0	O

0	O

0	O

0	O

0	O

0	O

1	O

1	O

0	O

0	O

1	O

0	O

2	O

0	O

0	O

1	O

1	O

3	O

0	O

1	O

0	O

0	O

4	O

0	O

1	O

0	O

1	O

5	O

0	O

1	O

1	O

0	O

6	O

0	O

1	O

1	O

1	O

7	O

1	O

0	O

0	O

0	O

8	O

1	O

0	O

0	O

1	O

9	O

1	O

0	O

1	O

0	O

A	O

1	O

0	O

1	O

1	O

B	O

1	O

1	O

0	O

0	O

C	O

1	O

1	O

0	O

1	O

D	O

1	O

1	O

1	O

0	O

*	O

1	O

1	O

1	O

1	O

#	O

Encoder	O
resolution	O
,	O
displacement	O
measurement	O
resolution	O
and	O
maximum	O
speed	O
that	O
can	O
be	O
measured	O
(	O
considering	O
r	O
=	O
25	O
mm	O
and	O
s	O
=	O
40	O
DTMF	O
digits	O
per	O
second	O
).	O

Encoder	O
resolution	O
(	O
digits	O
per	O
revolution	O
)	O

Displacement	O
resolution	O

Maximum	O
speed	O

1	O

157	O
mm	O

6	O
,	O
283	O
mm	O
/	O
s	O

6	O

26	O
mm	O

1	O
,	O
047	O
mm	O
/	O
s	O

12	O

13	O
mm	O

571	O
mm	O
/	O
s	O

24	O

6	O
.	O
5	O
mm	O

261	O
mm	O
/	O
s	O

40	O

3	O
.	O
92	O
mm	O

157	O
mm	O
/	O
s	O

Measurement	O
range	O
for	O
a	O
VGA	O
camera	O
(	O
640	O
×	O
480	O
).	O

All	O
values	O
in	O
centimeters	O
.	O

H	O

Measurement	O
Range	O

Minimum	O

Maximum	O

0	O
.	O
5	O

1	O
.	O
74	O

6	O
.	O
74	O

1	O

3	O
.	O
48	O

13	O
.	O
48	O

4	O
.	O
5	O

15	O
.	O
65	O

60	O
.	O
68	O

10	O

34	O
.	O
79	O

134	O
.	O
86	O

Distance	O
measurement	O
results	O
using	O
a	O
mobile	O
phone	O
camera	O
.	O

Real	O
distance	O
(	O
cm	O
)	O

Measured	O
distance	O
(	O
cm	O
)	O

Error	O
(%)	O

16	O

16	O
.	O
02	O

0	O
.	O
12	O

20	O

20	O
.	O
30	O

1	O
.	O
50	O

25	O

25	O
.	O
29	O

1	O
.	O
16	O

30	O

29	O
.	O
70	O

1	O
.	O
00	O

35	O

35	O
.	O
43	O

1	O
.	O
22	O

40	O

39	O
.	O
79	O

0	O
.	O
50	O

45	O

43	O
.	O
80	O

2	O
.	O
66	O

50	O

47	O
.	O
80	O

4	O
.	O
40	O

55	O

52	O
.	O
57	O

4	O
.	O
41	O

60	O

54	O
.	O
90	O

8	O
.	O
50	O

